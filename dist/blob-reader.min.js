!function(t){"use strict";function i(t){return this instanceof i?(this.blob=t,this.position=0,this.queue=[],void(this._pendingTask=!1)):new i(t)}i.ARRAY_BUFFER="ArrayBuffer",i.BINARY_STRING="BinaryString",i.TEXT="Text",i.DATA_URL="DataURL",i.prototype._invokeNext=function(){var t=this.queue.shift();if(t){if(this.position+t.count>this.blob.size)throw new Error("Limit reached. Trying to read "+(this.position+t.count)+" bytes out of "+this.blob.size+".");var r=new FileReader;this._pendingTask=!0,r.onload=function(i){var r=i.target.result;this._pendingTask=!1,t.cb(r),this._invokeNext()}.bind(this),r.onerror=function(){throw new Error("Error while reading the blob")},t.type||(t.type=i.BINARY_STRING),r["readAs"+t.type](this.blob.slice(this.position,this.position+t.count)),this.position+=t.count}},i.prototype.read=function(t,i,r){return"string"==typeof t&&(r=i,t=void 0,i=t),void 0===t&&(t=this.blob.size),"function"==typeof t&&(r=t,i=void 0,t=this.blob.size),"function"==typeof i&&(r=i,i=void 0),this.queue.push({count:t,cb:r,type:i}),this._pendingTask||this._invokeNext(),this},i.prototype.readText=function(t,r){return this.read(t,i.TEXT,r)},i.prototype.readArrayBuffer=function(t,r){return this.read(t,i.ARRAY_BUFFER,r)},i.prototype.readBinaryString=function(t,r){return this.read(t,i.BINARY_STRING,r)},i.prototype.readDataURL=function(t,r){return this.read(t,i.DATA_URL,r)},i.prototype._readWrapped=function(t,i,r){"function"==typeof t&&(i=t,t=void 0);var e=function(t){t=new r(t),i(t)};return this.readArrayBuffer(t,e)},i.prototype.readUint8=function(t,i){return this._readWrapped(t,i,Uint8Array)},i.prototype.readUint16=function(t,i){return this._readWrapped(t,i,Uint16Array)},i.prototype.readUint32=function(t,i){return this._readWrapped(t,i,Uint32Array)},t.BlobReader=i}(window);